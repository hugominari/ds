function generateModal(e,a,t,i){var e=e||"",a=a||"",t=t||"info",n={},o={title:e,type:t,html:a,width:"50rem",padding:"3em"};i&&(n={showCancelButton:!0,confirmButtonText:"Confirmar",cancelButtonText:"Cancelar"});var s=$.extend(o,n);swal(s).then(function(e){i(e.value&&i?!0:!1)})}function generateNotify(e,a,t,i,n,o,s){e=e||"",a=a||"",t=t||"info",i=i||null,o=o||"right",n=n||"bottom";var r="fa ",l=($(".js-fixed-actions").length,s||5e3);switch(t){case"warning":"animated fadeInUp",r+="fa-exclamation-triangle";break;case"danger":"animated fadeInUp",r+="fa-times-circle";break;case"success":"animated fadeInUp",r+="fa-check-circle";break;default:"animated fadeInUp",r+="fa-info-circle"}toastr.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"md-toast-"+n+"-"+o,preventDuplicates:!0,onclick:null,showDuration:500,hideDuration:1e3,timeOut:l,extendedTimeOut:1e3,showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},toastr[t](a)}function dataURItoBlob(e){for(var a=atob(e.split(",")[1]),t=e.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(a.length),n=new DataView(i),o=0;o<a.length;o++)n.setUint8(o,a.charCodeAt(o));return new Blob([i],{type:t})}function loadFilterOperators(e){var a=e.children("option:selected").attr("data-type"),t=e.children("option:selected").attr("data-values"),i=e.parents(".row.line"),n=i.find("[name^=operator]"),o=n.children("option"),s=i.find("input[name^=value]");i.find("select[name^=value]");switch(a){case"number":o.each(function(){var e=$(this).val(),a=[FILTER_LESS_THAN,FILTER_GREATER_THAN,FILTER_LESS_OR_EQUAL,FILTER_GREATER_OR_EQUAL,FILTER_EQUAL];in_array(e,a)?$(this).removeAttr("disabled"):$(this).attr("disabled",!0)}),s.addClass("number");break;case"select":var r=$("<select/>").attr({name:"value[]","data-name":"value"}),l=JSON.parse(t),d=[];o.each(function(){$(this).val()!==FILTER_EQUAL?$(this).attr("disabled",!0):$(this).removeAttr("disabled").prop("selected",!0)});for(var c=0;c<l.length;c++)d.push({id:l[c].value,text:l[c].label});r.select2({data:d}),s.before(r).attr("disabled",!0).hide();break;case"date":case"datetime":o.each(function(){var e=$(this).val(),a=[FILTER_DATE_GREATER_THAN,FILTER_DATE_LESS_THAN,FILTER_EQUAL];in_array(e,a)?$(this).removeAttr("disabled"):$(this).attr("disabled",!0)}),s.prop("type","date");break;default:o.each(function(){var e=$(this).val(),a=[FILTER_EQUAL,FILTER_CONTAINS,FILTER_NOT_EQUAL,FILTER_START_WITH,FILTER_END_WITH];in_array(e,a)?$(this).removeAttr("disabled"):$(this).attr("disabled",!0)})}prettySelect("select"),loadMasks()}function getColumns(e){var a=e.find("thead > tr > th"),t=[];return a.each(function(e,a){var i={data:$(this).data("slug"),name:$(this).data("slug")};t.push(i)}),t}function getFilters(){var e=[];return $.each($(".row.line"),function(){var a=$(this);e.push({column:a.find("[data-name=column]:not(:disabled)").val(),operator:a.find("[data-name=operator]:not(:disabled)").val(),value:a.find("[data-name=value]:not(:disabled)").val(),plus:a.find("[data-name=plus]:not(:disabled)").val()})}),e}function refreshDatatables(e){var a=form.attr("action"),t=$('[data-type="datatables"]:first');t.dataTable({paging:!0,destroy:!0,DeferRender:!0,serverSide:!1,processing:!0,columns:getColumns(t),columnDefs:[{targets:"no-sort",orderable:!1}],language:{url:dev.baseUrl+"/plugins/dataTables/Languages/portugues-brasil.lang"},ajax:{url:a,type:"GET",data:e},fnDrawCallback:function(){fixeActions()}})}function CKupdate(){for(instance in CKEDITOR.instances)CKEDITOR.instances[instance].updateElement()}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ajaxSend(function(e,a,t){var i=e.target.activeElement.closest(".dataTables_filter"),n=!0,o=["users/verify-notify"];$.each(o,function(e,a){var i=$(location).attr("href"),o=t.url;(~i.indexOf(a)||~o.indexOf(a))&&(n=!1)}),!i&&n&&blockUI(".content-wrapper",".login-box",".content-wrappers")}),$(document).ajaxComplete(function(e,a,t){unblockUI(".content-wrapper",".login-box",".content-wrappers")}),$(document).ajaxError(function(e,a,t){unblockUI(".content-wrapper",".login-box",".content-wrappers")});try{var _loadMasks=function(){var e=function(e){return 11===e.replace(/\D/g,"").length?"(00) 00000-0000":"(00) 0000-00009"},a={onKeyPress:function(a,t,i,n){i.mask(e.apply({},arguments),n)}},t=function(e){return e.replace(/\D/g,"").length<=11?"000.000.000-009":"00.000.000/0000-00"},i={onKeyPress:function(e,a,i,n){i.mask(t.apply({},arguments),n)}};$(".cpfcnpj").mask(t,i),$(".cpf").mask("000.000.000-00",{reverse:!0}),$(".cnpj").mask("00.000.000/0000-00",{reverse:!0}),$(".cep").mask("00000-000"),$(".coord").mask("~00.00######",{translation:{"~":{pattern:/-/,optional:!0}}}),$(".date").mask("00/00/0000"),$(".datetime").mask("00/00/0000 00:00:00"),$(".time").mask("00:00:00"),$(".tel").mask("(00) 0000-0000"),$(".cel").mask(e,a),$(".money").mask("#.##0,00",{reverse:!0}),$(".percent").mask("000,00",{reverse:!0}),$(".letter").mask("Z",{translation:{Z:{pattern:/[a-zA-Z ]/,recursive:!0}}}),$(".number").mask("N",{translation:{N:{pattern:/[0-9]/,recursive:!0}}}),$(".slug").mask("S",{translation:{S:{pattern:/[a-z0-9_.]/,recursive:!0}}}),$(".agency-mask").mask("0000-0"),$(".account-mask").mask("000000000000-0",{reverse:!0})};_loadMasks()}catch(e){console.log("Inputmask não inicializado.")}try{var _loadDropzone=function e(a){a||(a=$("[data-type='dropzone']")),a.each(function(t){var i=$(this);if(i.hasClass("drop-carousel"))var n=i.parents("[data-ride='carousel']");var o,s,r=i.children("input"),l=i.parents("[data-block]"),d=l.attr("data-block"),c=$(this).data("maxfiles")>1,m=!i.hasClass("disabled"),u=c?"files":"file",p=c?$(this).data("maxfiles"):1;i.dropzone({url:$(this).data("source"),acceptedFiles:$(this).data("accept"),maxFilesize:$(this).data("maxsize")||2,maxFiles:p,paramName:u,parallelUploads:1,uploadMultiple:c,addRemoveLinks:m,clickable:m,autoProcessQueue:!0,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},init:function(){s=i.parent().clone();var t=i.children("input");if(r.val()&&!str_contains(r.val(),"/0/")){var l={name:r.data("filename"),size:r.data("size"),type:r.data("mime"),status:Dropzone.ADDED,url:r.val()};this.options.addedfile.call(this,l),this.options.thumbnail.call(this,l,r.val()),l.previewElement.classList.add("dz-success"),l.previewElement.classList.add("dz-complete")}this.on("addedfile",function(e){empty(d)||blockUI(d)}),this.on("sending",function(e,a,t){t.append("docType",i.find('input[type="hidden"]').attr("id")),i.find(".dz-preview .dz-remove").addClass("dz-sending")}),this.on("maxfilesexceeded",function(e){o.removeFile(e),generateNotify("Erro: ","Você excedeu o numero máximo de arquivos, Máximo de arquivos permitidos: "+p,"error")}),this.on("error",function(e,a,t){this.files.length>p||o.removeAllFiles();var n=1024*this.options.maxFilesize*1024,s=bytesToSize(n),r=bytesToSize(e.size);e.size>n&&generateNotify("Erro: ","O arquivo excedeu o tamanho máximo permitido: ("+s+") e o tamanho dele é de "+r,"error"),a.message&&i.find(".dz-message").children(0).hide().after("<span>"+a.message+"</span>")}),this.on("success",function(e,a){a.success&&o.disable(),a.callback&&Callbacks[a.callback](a),t.val(a.filename),t.attr("data-mime",a.mime),t.attr("data-size",a.size),t.attr("data-filename",a.filename),t.attr("data-url",a.url)}),this.on("complete",function(r,l){if(empty(d)||unblockUI(d),i.find(".dz-preview .dz-remove").removeClass("dz-sending"),i.hasClass("with-error")&&i.removeClass("with-error"),i.hasClass("dz-multiple")){var c=i.parent().parent(),m=s.clone(),u=m.find("input[type=hidden]"),p=u.attr("id"),f=c.find(".files").length+1,h=p+"-"+f;m.find(".dropzone").removeClass(p).addClass(h),m.find("input[type=hidden]").attr("id",h),c.append(m),e($("."+h))}i.hasClass("dz-clear-on-finish")&&$(document).on("click",".dz-remove-custom",function(e){o.enable(),o.removeAllFiles(),t.val("")}),a.hasClass("drop-carousel")&&setTimeout(function(){n.carousel("next")},800)}),this.on("removedfile",function(e,a){var t=r.val(),n=i.hasClass("keep-files");if(t.length>4&&!n&&!str_contains(t,"/0/")){var a={filename:r.data("filename"),path:r.data("path")||t};$.ajax({url:route("default.deleteFile"),type:"DELETE",data:a,success:function(){var e=i.parent().parent(),a=e.find(".dz-multiple").length;i.hasClass("dz-multiple")&&a>1&&i.parent().remove()}})}o.enable(),r.val("")})},dictDefaultMessage:'<i class="material-icons font-40 m-b-10 d-block">touch_app</i> '+i.data("message"),dictFallbackMessage:"Seu navegador não suporta envio de arquivos com drag'n'drop.",dictFallbackText:"Use os campos abaixo para enviar seus arquivos",dictInvalidFileType:"O tipo do arquivo não é aceito",dictFileTooBig:"O arquivo é muito grande",dictResponseError:"Ocorreu um erro ao transferir o arquivo",dictCancelUpload:"",dictCancelUploadConfirmation:"Quer mesmo cancelar o envio?",dictRemoveFile:"",dictMaxFilesExceeded:"Você excedeu o número máximo de arquivos"}),o=Dropzone.forElement(i[0]),(i.attr("disabled")||i.hasClass("disabled"))&&o.disable()})};Dropzone.autoDiscover=!1,_loadDropzone()}catch(e){console.log("Dropzone não inicializado.")}try{var modalTemplate='<div id="modal-cropper" class="modal fade" tabindex="-1" role="dialog"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title">Recorte de imagem</h4></div><div class="modal-body"><div class="image-container"></div></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Fechar</button><button type="button" class="btn btn-primary m-r-18 crop-upload">Salvar</button></div></div></div></div>';Dropzone.autoDiscover=!1,$("[data-type='dropzone-crop']").each(function(e){var a,t,i=$(this),n=i.children("input"),o=$(this).data("maxfiles")>1,s=($(this).data("maxfiles"),i.closest(".box")),r=!i.hasClass("disabled");i.dropzone({autoProcessQueue:!1,url:i.data("source"),acceptedFiles:"image/*",maxFiles:1,uploadMultiple:o,addRemoveLinks:!i.hasClass("disabled"),clickable:r,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},init:function(){if(t=i.parent().clone(),i.hasClass("disabled")&&i.unbind("click"),n.val()&&!str_contains(n.val(),"/0/")){var e={name:n.data("filename"),size:n.data("size"),type:n.data("mime"),status:Dropzone.ADDED,url:n.val()};this.options.addedfile.call(this,e),this.options.thumbnail.call(this,e,n.val()),e.previewElement.classList.add("dz-success"),e.previewElement.classList.add("dz-complete")}this.on("thumbnail",function(e){if(!e.cropped){if(e.width<300||e.height<300)return generateNotify("Atenção:","Esta imagem é muito pequena e a qualidade ficará comprometida após este procedimento, por favor, escolha outra imagem!","danger","","bottom","right"),i.addClass("with-error"),void this.removeFile(e);var t=e.name;this.removeFile(e);var n=$(modalTemplate),o=n.find(".crop-upload"),s=$("<img />"),r=new FileReader;r.onloadend=function(){n.find(".image-container").html(s),s.attr("src",r.result),s.cropper({aspectRatio:1,autoCropArea:1,movable:!0,cropBoxResizable:!0,minContainerWidth:600,minContainerHeight:600,minCanvasHeight:600,minCanvasWidth:600})},r.readAsDataURL(e),n.one("shown.bs.modal",function(e){var a=n.find(".cropper-container.cropper-bg").outerWidth()+50;$(".modal-dialog").width(a)}).modal("show"),o.on("click",function(){var e=s.cropper("getCroppedCanvas").toDataURL(),i=dataURItoBlob(e);i.cropped=!0,i.name=t,a.addFile(i),a.processQueue(),n.modal("hide")})}}),this.on("addedfile",function(e){}),this.on("sending",function(e,a,t){i.find(".dz-preview .dz-remove").addClass("dz-sending")}),this.on("error",function(e,t,n){unblockUI(s),a.removeAllFiles();var o=1024*this.options.maxFilesize*1024,r=bytesToSize(o),l=bytesToSize(e.size);e.size>o&&generateNotify("Erro: ","O arquivo excedeu o tamanho máximo permitido: ("+r+") e o tamanho dele é de "+l,"error"),t.message&&i.find(".dz-message").children(0).hide().after("<span>"+t.message+"</span>"),a.removeAllFiles(),i.addClass("with-error")}),this.on("success",function(e,t){t.success&&a.disable(),t.callback&&Callbacks[t.callback](t),n.val(t.filename),n.attr("data-mime",t.mime),n.attr("data-size",t.size),n.attr("data-filename",t.filename),n.attr("data-url",t.url)}),this.on("complete",function(e,n){if(unblockUI(s),i.find(".dz-preview .dz-remove").removeClass("dz-sending"),i.hasClass("with-error")&&i.removeClass("with-error"),i.hasClass("dz-multiple")){var o=$(".form-group.files:first").parent(),r=t.clone(),l=clonedDz.find("input[type=hidden]"),d=l.attr("id"),c=$(".form-group.files").length+1,m=d+"-"+c;r.find(".dropzone").removeClass(d).addClass(m),r.find("input[type=hidden]").attr("id",m),o.append(r),loadDropzone($("."+m))}i.hasClass("dz-clear-on-finish")&&$(document).on("click",".dz-remove-custom",function(e){a.enable(),a.removeAllFiles(),l.val("")})}),this.on("removedfile",function(e,t){var o=n.val(),s=i.hasClass("keep-files");if(o.length>4&&!s&&!str_contains(o,"/0/")){var t={filename:n.data("filename"),path:n.data("path")||o};$.ajax({url:route("default.deleteFile"),type:"DELETE",data:t,success:function(){i.hasClass("dz-multiple")&&i.parent().remove()}})}i.addClass("dz-clickable").find(".dz-message").show(),i.find(".dz-message").children(0).show().next().show(),i.find(".alert").hide(),a.enable(),n.val("")})},dictDefaultMessage:'<i class="material-icons d-block font-40 m-b-10">touch_app</i> '+i.data("message"),dictFallbackMessage:"Seu navegador não suporta envio de arquivos com drag'n'drop.",dictFallbackText:"Use os campos abaixo para enviar seus arquivos",dictInvalidFileType:"O tipo do arquivo não é aceito",dictFileTooBig:"O arquivo é muito grande",dictResponseError:"Ocorreu um erro ao transferir o arquivo",dictCancelUpload:"",dictCancelUploadConfirmation:"Quer mesmo cancelar o envio?",dictRemoveFile:"",dictMaxFilesExceeded:"Você excedeu o número máximo de arquivos"}),a=Dropzone.forElement(i[0]),(i.attr("disabled")||i.hasClass("disabled"))&&a.disable()})}catch(e){console.log("Dropzone não inicializado.")}var wrapper=$(".js-filter-box"),lineFilter=wrapper.children(".row.line").clone(),form=$("#form-filter"),FILTER_EQUAL="1",FILTER_CONTAINS="2",FILTER_NOT_EQUAL="3",FILTER_START_WITH="4",FILTER_END_WITH="5",FILTER_GREATER_THAN="6",FILTER_GREATER_OR_EQUAL="7",FILTER_LESS_THAN="8",FILTER_LESS_OR_EQUAL="9",FILTER_DATE_GREATER_THAN="10",FILTER_DATE_LESS_THAN="11";$(".js-add-filter").on("click",function(){var e=lineFilter.clone();e.find(".js-add-filter").addClass("js-remove-filter").removeClass("js-add-filter").find(".fa-plus").addClass("fa-minus").removeClass("fa-plus"),e.appendTo(wrapper)}),$(document).on("click",".js-remove-filter",function(){$(this).parents(".row.line").remove()}),$("[name*=column]").on("change",function(){console.log($(this)),loadFilterOperators($(this))}),$(".js-filter").on("click",function(){refreshDatatables({filter:getFilters()})}),$(".clear-filter").on("click",function(e){refreshDatatables("null"),$(".row.line:not(:first)").remove(),$(".row.line :input:not([data-name=plus])").val("").trigger("change")});try{$("table[data-type='datatables']").each(function(e){var a=$(this),t=1,i=$("th.default-sort");i.length>0&&(t=parseInt(i.index())),console.log(getColumns(a)),a.dataTable({columns:getColumns(a),ajax:a.attr("data-source"),paging:!0,responsive:!0,serverSide:!0,processing:!1,DeferRender:!0,columnDefs:[{targets:"no-sort",orderable:!1},{searchable:!1,targets:"no-filter"}],order:[[t,"asc"]],language:{url:dev.baseUrl+"/plugins/datatables/Languages/portugues-brasil.lang"},preDrawCallback:function(e){var a="#"+$(this).attr("id");$(a).DataTable(),$(a+"_wrapper").find("label").each(function(){$(this).parent().append($(this).children())}),$(a+"_wrapper .dataTables_filter").find("input").each(function(){$(this).find("input").attr("placeholder","Filtro rápido"),$(this).find("input").removeClass("form-control-sm")}),$(a+"_wrapper .dataTables_length").addClass("d-none"),$(a+"_wrapper .dataTables_filter").addClass("md-form"),$(a+"_wrapper .dataTables_filter").find("label").remove()},initComplete:function(e,a){fixeActions()}})})}catch(e){console.log("")}$(document).on("click",".js-submit",function(e){e.preventDefault();var a=$(this),t=$(this).parents("form.ajax-form");if(Callbacks.preSubmit()){$(".form-group").removeClass("has-error").find("span.text-danger").remove();$(".ckeditor").length>0&&CKupdate(),a.hasClass("block-body")?blockUI("body"):a.attr("disabled",!0).attr("old-html",a.html()).html('<i class="fa fa-spin fa-spinner"></i>'+(a.hasClass("js-submit-icon-only")?"":" Aguarde")),$.ajax({dataType:"json",type:"POST",url:t.attr("action"),data:Callbacks.serializeData(t.serializeArray()),success:function(e){var a=e.original;if(a&&(e=a),e.success){e.callback?Callbacks[e.callback](e):e.message&&generateNotify(e.title,e.message,e.type),$(".clear-inputs").trigger("click"),t.trigger("reset"),$('[data-type="datatables"]').length>0&&$("[data-type=datatables]").DataTable().ajax.reload();try{$("#makeAttendance").modal("hide")}catch(e){console.log("")}}},error:function(e,t,i){var n=e.responseJSON;if(n){n=n.errors,$.each(n,function(e,a){var t=$("#"+e);t.length<1&&(t=$("[name="+e+"]"));var i=t.parents(".form-group, .md-form");t.attr("type");if(i.find(".dropzone").length>0?i.find(".dropzone").addClass("with-error"):i.addClass("has-error"),t.hasClass("hide")||t.attr("data-error")){var n=t.attr("data-error");n&&$(n).css("border-color","red")}i.find(".span-error").remove(),i.append('<span class="text-danger d-block span-error"><i class="fa fa-exclamation-circle m-r-5" aria-hidden="true"></i>'+a+"</span>")});if($(".has-error").length>0){var o=$(".has-error").first();o.find(":input:not(select)").focus(),$("html, body").animate({scrollTop:o.offset().top-80},1e3)}}a.hasClass("block-body")?unblockUI("body"):a.attr("disabled",!1).html(a.attr("old-html"))},complete:function(){a.hasClass("block-body")?unblockUI("body"):a.attr("disabled",!1).html(a.attr("old-html"))}}),Callbacks.postSubmit()}}),$(document).on("click",".js-delete",function(e){e.preventDefault();var a=$(this).attr("href");a?generateModal("Confirmar exclusão","Você deseja realmente excluir este registro?","info",function(e){if(e){var t={id:$("#id").val(),type:$("#type").val(),model:$("#model").val()};$.ajax({url:a,dataType:"json",type:"DELETE",data:t,success:function(e){$(".clear-inputs").trigger("click"),$("[data-type=datatables]").DataTable().ajax.reload(),generateNotify(e.title,e.message,e.type)},error:function(e){generateNotify(e.title,e.message,e.type)}})}}):console.log("Missing Parameters to execute function")}),$(document).on("click",".clear-inputs, [type=reset]",function(e){e.preventDefault();var a=$(this).closest("form"),t=$("#id").val(),i=$('#id:not(".clear")');a.trigger("reset"),t&&i&&i.val(t)});
